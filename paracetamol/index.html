<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acetaminophen Poisoning Management Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #e2e8f0; /* Softer gray-blue background */
            color: #1a202c; /* Dark text */
        }
        .card {
            background-color: #f8fafc; /* Very light card */
            border: 1px solid #cbd5e1; /* Soft border */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .btn {
            background-color: #3b82f6; /* Blue button */
            transition: background-color 0.3s;
            color: white;
        }
        .btn:hover {
            background-color: #2563eb;
        }
        input, select {
            background-color: #f0f4f8;
            border-color: #cbd5e1;
            color: #1a202c;
        }
        .result-box {
            background-color: #e0f2fe; /* Light blue background */
            border-left: 4px solid #38bdf8; /* Soft blue border */
        }
        .header-text {
            color: #111827;
        }
        .label-text {
            color: #4a5568;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto space-y-8">
        <header class="text-center">
            <h1 class="text-3xl md:text-4xl font-bold header-text">Acetaminophen Poisoning Management Tool</h1>
            <p class="text-lg text-gray-600 mt-2">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÄ‡∏ß‡∏ä‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô ‡∏£‡∏û.‡∏°‡∏´‡∏≤‡∏£‡∏≤‡∏ä‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤</p>
            <p style="font-size:1em; color:#555;">
    Guidance from US & Canada Poison Centers 
    (<a href="https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2808062" target="_blank" style="color:#007acc; text-decoration:none;">
      JAMA Network Open, 2023
    </a>)
  </p>
        </header>

        <div class="card rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4 border-b border-gray-200 pb-2">1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div>
                    <label for="scenario" class="block text-sm font-medium label-text mb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢:</label>
                    <select id="scenario" class="w-full rounded-md p-2">
                        <option value="acute">Acute Ingestion (‡∏ó‡∏£‡∏≤‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô, < 24 ‡∏ä‡∏°.)</option>
                        <option value="unknown">Unknown Time / Unreliable History</option>
                        <option value="repeated">Repeated Supratherapeutic Ingestion (RSI)</option>
                        <option value="extended">Extended-Release / Co-ingestion</option>
                    </select>
                </div>
                <div>
                    <label for="patient-age" class="block text-sm font-medium label-text mb-2">‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏õ‡∏µ):</label>
                    <input type="number" id="patient-age" placeholder="‡πÄ‡∏ä‡πà‡∏ô 25" class="w-full rounded-md p-2">
                </div>
                 <div>
                    <label for="patient-weight" class="block text-sm font-medium label-text mb-2">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (kg):</label>
                    <input type="number" id="patient-weight-section1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 60" class="w-full rounded-md p-2">
                </div>
                <div>
                    <label for="initial-time" class="block text-sm font-medium label-text mb-2">‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤ (‡∏ä‡∏°.):</label>
                    <input type="number" id="initial-time" placeholder="‡πÄ‡∏ä‡πà‡∏ô 2" class="w-full rounded-md p-2">
                </div>
            </div>
             <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <div>
                    <label for="dose-per-pill" class="block text-sm font-medium label-text mb-2">‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤‡∏ï‡πà‡∏≠‡πÄ‡∏°‡πá‡∏î (mg):</label>
                    <input type="number" id="dose-per-pill" placeholder="‡πÄ‡∏ä‡πà‡∏ô 500" class="w-full rounded-md p-2">
                </div>
                <div>
                    <label for="number-of-pills" class="block text-sm font-medium label-text mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏°‡πá‡∏î:</label>
                    <input type="number" id="number-of-pills" placeholder="‡πÄ‡∏ä‡πà‡∏ô 20" class="w-full rounded-md p-2">
                </div>
            </div>
             <div id="assessment-result" class="result-box p-4 rounded-md mt-4">
                <h3 class="font-bold text-lg mb-2">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô:</h3>
                <p id="scenario-advice">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</p>
            </div>
        </div>

        <div class="card rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4 border-b border-gray-200 pb-2">2. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</h2>
            <div id="toxic-dose-result" class="mb-4"></div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="font-bold text-lg text-blue-600 mb-2">‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡∏© (Toxic Dose)</h3>
                    <div class="space-y-3">
                        <div>
                            <p class="font-semibold">Acute Ingestion (‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)</p>
                            <ul class="list-disc list-inside text-sm label-text">
                                <li><strong>‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏î‡πá‡∏Å ‚â• 6 ‡∏õ‡∏µ:</strong> > 10 ‡∏Å‡∏£‡∏±‡∏° ‡∏´‡∏£‡∏∑‡∏≠ > 200 mg/kg</li>
                                <li><strong>‡πÄ‡∏î‡πá‡∏Å < 6 ‡∏õ‡∏µ:</strong> > 200 mg/kg</li>
                            </ul>
                        </div>
                        <div>
                            <p class="font-semibold">Repeated Supratherapeutic Ingestion (RSI)</p>
                             <ul class="list-disc list-inside text-sm label-text">
                                <li>> 6 ‡∏Å‡∏£‡∏±‡∏°/24‡∏ä‡∏°. ‡∏´‡∏£‡∏∑‡∏≠ > 150 mg/kg/24‡∏ä‡∏°. (‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ß‡∏±‡∏ô)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                 <div>
                    <h3 class="font-bold text-lg text-blue-600 mb-2">‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ Activated Charcoal</h3>
                    <div class="space-y-2">
                        <p class="font-semibold">‡∏Ç‡∏ô‡∏≤‡∏î: 1 g/kg (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 50 g)</p>
                        <ul class="list-disc list-inside text-sm label-text">
                            <li>‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏°‡∏≤‡∏ñ‡∏∂‡∏á ‡∏£‡∏û. <strong>‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 4 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</strong> ‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤ (Immediate-Release)</li>
                             <li>‡∏≠‡∏≤‡∏à‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏´‡πâ <strong>‡∏´‡∏•‡∏±‡∏á 4 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</strong> ‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏¢‡∏≤ Extended-Release ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏¥‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏¢‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏∞‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏î‡∏ã‡∏∂‡∏° (‡πÄ‡∏ä‡πà‡∏ô Opioids, Anticholinergics)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="card rounded-lg p-6">
                <h2 class="text-2xl font-bold mb-4 border-b border-gray-200 pb-2">3. Modified Rumack-Matthew Nomogram</h2>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4">
                    <div>
                        <label for="time-since-ingestion" class="block text-sm font-medium label-text">‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤ (‡∏ä‡∏°.)</label>
                        <input type="number" id="time-since-ingestion" placeholder="4-24" class="w-full mt-1 rounded-md p-2">
                    </div>
                    <div>
                        <label for="apap-level" class="block text-sm font-medium label-text">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏¢‡∏≤ APAP (¬µg/mL)</label>
                        <input type="number" id="apap-level" placeholder="‡πÄ‡∏ä‡πà‡∏ô 150" class="w-full mt-1 rounded-md p-2">
                    </div>
                    <button id="plot-button" class="btn font-bold rounded-md sm:self-end h-10">Plot Point</button>
                </div>
                <div id="plot-result" class="text-center font-semibold text-lg p-2 min-h-[40px]"></div>
                <div class="relative h-96 w-full">
                    <canvas id="nomogramChart"></canvas>
                </div>
            </div>

            <div class="card rounded-lg p-6">
                <h2 class="text-2xl font-bold mb-4 border-b border-gray-200 pb-2">4. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ Acetylcysteine (IV NAC)</h2>
                <div class="flex items-end gap-4 mb-4">
                    <div class="flex-grow">
                        <label for="patient-weight-section4" class="block text-sm font-medium label-text">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ (kg)</label>
                        <input type="number" id="patient-weight-section4" placeholder="‡πÄ‡∏ä‡πà‡∏ô 60" class="w-full mt-1 rounded-md p-2">
                    </div>
                    <button id="calculate-nac" class="btn font-bold rounded-md h-10 px-6">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
                </div>
                <div id="nac-result" class="space-y-3">
                </div>
                <div>
                    <h3 class="font-bold text-lg text-emerald-600 mb-2">‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏´‡∏¢‡∏∏‡∏î‡∏¢‡∏≤ NAC</h3>
                    <p class="text-sm mb-2">(‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠)</p>
                    <ul class="list-disc list-inside space-y-1 label-text">
                        <li>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏¢‡∏≤ Acetaminophen < 10 ¬µg/mL</li>
                        <li>INR < 2.0</li>
                        <li>AST/ALT ‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏î‡∏•‡∏á >25-50% ‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</li>
                        <li>‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="card rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4 border-b border-gray-200 pb-2">5. ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-bold text-lg text-sky-600 mb-2">‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏ü‡∏≠‡∏Å‡πÑ‡∏ï (Hemodialysis)</h3>
                     <ul class="list-disc list-inside space-y-1 label-text">
                        <li>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏¢‡∏≤ Acetaminophen ‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å (‚â• 900 ¬µg/mL)</li>
                        <li>‡∏°‡∏µ‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏£‡∏î (Acidosis) ‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</li>
                        <li>‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ï‡∏±‡∏ß‡∏à‡∏≤‡∏Å toxic paracetamol (Altered consciousness)</li>
                        <li class="mt-2 pt-2 border-t border-gray-200"><strong>‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ NAC ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ü‡∏≠‡∏Å‡πÑ‡∏ï:</strong> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 12.5 mg/kg/hr</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold text-lg text-red-600 mb-2">‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏õ‡∏•‡∏π‡∏Å‡∏ñ‡πà‡∏≤‡∏¢‡∏ï‡∏±‡∏ö (King's College)</h3>
                    <p class="text-sm mb-2">‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡∏°‡∏õ‡∏•‡∏π‡∏Å‡∏ñ‡πà‡∏≤‡∏¢‡∏ï‡∏±‡∏ö‡∏´‡∏≤‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏Å‡∏±‡∏ö‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡∏Ç‡πâ‡∏≠‡∏´‡∏ô‡∏∂‡πà‡∏á</p>
                    <ul class="list-disc list-inside space-y-1 label-text">
                         <li><strong>Lactate > 3.0 mmol/L</strong> (‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏£‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà)</li>
                        <li>Arterial pH < 7.30 (‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏£‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà)</li>
                        <li class="font-semibold">‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ 3 ‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô:</li>
                         <ul class="list-['-_'] ml-6">
                            <li>Prothrombin time > 100s (INR > 6.5)</li>
                            <li>Serum creatinine > 3.4 mg/dL</li>
                            <li>Grade III-IV hepatic encephalopathy</li>
                         </ul>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4 border-b border-gray-200 pb-2">6. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏¢‡∏≤ NAC</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="result-box p-4 rounded-md border-yellow-500">
                    <h4 class="font-bold text-lg">Flushing (‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏î‡∏á)</h4>
                    <p class="text-sm">‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏ï‡πà‡∏≠ ‡∏´‡∏≤‡∏Å‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏¢‡∏∏‡∏î‡∏¢‡∏≤</p>
                </div>
                 <div class="result-box p-4 rounded-md border-orange-500">
                    <h4 class="font-bold text-lg">Urticaria (‡∏ú‡∏∑‡πà‡∏ô‡∏•‡∏°‡∏û‡∏¥‡∏©)</h4>
                    <p class="text-sm">‡πÉ‡∏´‡πâ‡∏¢‡∏≤ Diphenhydramine 1 mg/kg IV (max 50 mg) ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ NAC ‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ</p>
                </div>
                 <div class="result-box p-4 rounded-md border-red-500">
                    <h4 class="font-bold text-lg">Angioedema (‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏°)</h4>
                    <p class="text-sm">‡∏´‡∏¢‡∏∏‡∏î‡∏¢‡∏≤ NAC ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ, ‡πÉ‡∏´‡πâ Diphenhydramine. ‡∏´‡∏≤‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô 1 ‡∏ä‡∏°. ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏¢‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ</p>
                </div>
                 <div class="result-box p-4 rounded-md border-red-700">
                    <h4 class="font-bold text-lg">Anaphylaxis / Hypotension</h4>
                    <p class="text-sm">‡∏´‡∏¢‡∏∏‡∏î‡∏¢‡∏≤ NAC ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ, ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á Anaphylaxis. ‡∏´‡∏≤‡∏Å‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏ï‡πà‡∏≠ ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ó‡∏µ‡πà‡∏ä‡πâ‡∏≤‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç</p>
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const scenarioSelect = document.getElementById('scenario');
            const patientAge = document.getElementById('patient-age');
            const patientWeight1 = document.getElementById('patient-weight-section1');
            const initialTime = document.getElementById('initial-time');
            const dosePerPill = document.getElementById('dose-per-pill');
            const numberOfPills = document.getElementById('number-of-pills');
            const toxicDoseResult = document.getElementById('toxic-dose-result');
            const scenarioAdvice = document.getElementById('scenario-advice');
            
            const timeInputNomogram = document.getElementById('time-since-ingestion');
            const levelInputNomogram = document.getElementById('apap-level');
            const plotButton = document.getElementById('plot-button');
            const plotResult = document.getElementById('plot-result');

            const patientWeight4 = document.getElementById('patient-weight-section4');
            const calculateNacButton = document.getElementById('calculate-nac');
            const nacResultDiv = document.getElementById('nac-result');

            const scenarios = {
                acute: '‡πÄ‡∏à‡∏≤‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö Acetaminophen ‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡∏•‡∏≤ 4-24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤ ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏≥‡∏Ñ‡πà‡∏≤‡πÑ‡∏õ plot ‡∏ö‡∏ô Nomogram ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‡∏´‡∏≤‡∏Å‡∏ú‡∏•‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡∏ä‡πâ‡∏≤ (> 8 ‡∏ä‡∏°. ‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏¥‡∏ô‡∏¢‡∏≤) ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏¥‡∏ô‡∏¢‡∏≤‡πÉ‡∏ô‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å (‡∏î‡∏π‡πÄ‡∏Å‡∏ì‡∏ë‡πå Toxic Dose) ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ NAC ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô',
                unknown: '‡πÄ‡∏à‡∏≤‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö Acetaminophen, AST, ALT ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ / ‡πÉ‡∏´‡πâ NAC ‡∏´‡∏≤‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏¢‡∏≤ > 10 ¬µg/mL ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πà‡∏≤ AST/ALT ‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥',
                repeated: '‡πÄ‡∏à‡∏≤‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö Acetaminophen, AST, ALT, Creatinine / ‡πÉ‡∏´‡πâ NAC ‡∏´‡∏≤‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏¢‡∏≤ ‚â• 20 ¬µg/mL ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πà‡∏≤ AST/ALT ‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (‡∏î‡∏π‡πÄ‡∏Å‡∏ì‡∏ë‡πå Toxic Dose)',
                extended: '‡πÄ‡∏à‡∏≤‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ó‡∏µ‡πà 4-12 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤ ‡∏´‡∏≤‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏¢‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ‡πÄ‡∏™‡πâ‡∏ô Treatment Line ‡πÅ‡∏ï‡πà > 10 ¬µg/mL ‡πÉ‡∏´‡πâ‡πÄ‡∏à‡∏≤‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å 4-6 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á'
            };

            function updateScenarioAdvice() {
                scenarioAdvice.textContent = scenarios[scenarioSelect.value];
            }
            scenarioSelect.addEventListener('change', updateScenarioAdvice);
            updateScenarioAdvice();

            const calculateToxicDose = () => {
                const weight = parseFloat(patientWeight1.value);
                const age = parseFloat(patientAge.value);
                const dose = parseFloat(dosePerPill.value);
                const pills = parseFloat(numberOfPills.value);

                if (isNaN(weight) || isNaN(dose) || isNaN(pills) || isNaN(age) || weight <= 0) {
                    toxicDoseResult.innerHTML = '';
                    return;
                }

                const totalDoseMg = dose * pills;
                const totalDoseG = totalDoseMg / 1000;
                const dosePerKg = totalDoseMg / weight;

                let toxicThreshold;
                if (age >= 6) {
                    toxicThreshold = 200; // mg/kg for adults and children >= 6 years
                } else {
                    toxicThreshold = 200; // mg/kg for children < 6 years
                }

                let resultHtml = `<div class="result-box p-4 rounded-md mt-4">`;
                resultHtml += `<h3 class="font-bold text-lg mb-2">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô Toxic Dose:</h3>`;
                resultHtml += `<p>‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: **${totalDoseMg.toLocaleString()} mg** (${totalDoseG.toFixed(1)} ‡∏Å‡∏£‡∏±‡∏°)</p>`;
                resultHtml += `<p>‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏¢‡∏≤‡∏ï‡πà‡∏≠‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°: **${dosePerKg.toFixed(1)} mg/kg**</p>`;

                if (dosePerKg >= toxicThreshold || totalDoseG >= 10) {
                    resultHtml += `<p class="mt-2 text-red-600 font-semibold">üö® ‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå Toxic Dose (${toxicThreshold} mg/kg ‡∏´‡∏£‡∏∑‡∏≠ > 10 ‡∏Å‡∏£‡∏±‡∏°)</p>`;
                } else {
                    resultHtml += `<p class="mt-2 text-green-600 font-semibold">‚úÖ ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå Toxic Dose</p>`;
                }
                resultHtml += `</div>`;
                toxicDoseResult.innerHTML = resultHtml;
            };

            patientWeight1.addEventListener('input', () => {
                patientWeight4.value = patientWeight1.value;
                calculateToxicDose();
            });
            patientAge.addEventListener('input', calculateToxicDose);
            dosePerPill.addEventListener('input', calculateToxicDose);
            numberOfPills.addEventListener('input', calculateToxicDose);

            initialTime.addEventListener('input', () => {
                timeInputNomogram.value = initialTime.value;
            });

            const ctx = document.getElementById('nomogramChart').getContext('2d');
            
            const k_treat = Math.log(150/5) / 20;
            const A_treat = 150 / Math.exp(-k_treat * 4);
            const treatmentLineData = Array.from({length: 21}, (_, i) => ({x: i + 4, y: A_treat * Math.exp(-k_treat * (i+4))}));

            const k_risk = Math.log(300/10) / 20;
            const A_risk = 300 / Math.exp(-k_risk * 4);
            const highRiskLineData = Array.from({length: 21}, (_, i) => ({x: i + 4, y: A_risk * Math.exp(-k_risk * (i+4))}));
            
            const nomogramChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Treatment Line',
                        data: treatmentLineData,
                        borderColor: '#10b981',
                        backgroundColor: 'transparent',
                        borderWidth: 2,
                        pointRadius: 0,
                        showLine: true,
                        fill: false,
                    }, {
                        label: 'High-Risk Line',
                        data: highRiskLineData,
                        borderColor: '#ef4444',
                        backgroundColor: 'transparent',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        showLine: true,
                        fill: false,
                    }, {
                        label: 'Patient Level',
                        data: [],
                        backgroundColor: '#3b82f6',
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: { display: true, text: 'Time Since Ingestion (hours)', color: '#4b5563' },
                            min: 0,
                            max: 28,
                            ticks: {
                                color: '#6b7280',
                                stepSize: 4,
                                callback: function(value) {
                                    if ([4, 8, 12, 16, 20, 24].includes(value)) {
                                        return `${value}‡∏ä‡∏°.`;
                                    }
                                    return '';
                                }
                            },
                            grid: {
                                color: (context) => {
                                    const value = context.tick.value;
                                    if ([4, 8, 12, 16, 20, 24].includes(value)) {
                                        return 'rgba(100, 116, 139, 0.5)';
                                    }
                                    return 'transparent';
                                }
                            }
                        },
                        y: {
                            type: 'logarithmic',
                            title: { display: true, text: 'Acetaminophen Concentration (¬µg/mL)', color: '#4b5563' },
                            min: 1, max: 500,
                            ticks: { color: '#6b7280', callback: (value) => Number(value.toString()) },
                            grid: {
                                color: '#e2e8f0',
                            }
                        }
                    },
                    plugins: {
                        legend: { labels: { color: '#374151' } },
                        tooltip: { callbacks: { label: (c) => `${c.dataset.label}: (${c.parsed.x}h, ${c.parsed.y.toFixed(1)} ¬µg/mL)` } }
                    },
                    animation: {
                        duration: 0
                    },
                    layout: {
                        padding: {
                            left: 0, right: 0, top: 0, bottom: 0
                        }
                    }
                }
            });
            
            plotButton.addEventListener('click', () => {
                const time = parseFloat(timeInputNomogram.value);
                const level = parseFloat(levelInputNomogram.value);

                if (isNaN(time) || isNaN(level) || time < 4 || time > 24) {
                    plotResult.textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ß‡∏•‡∏≤ (4-24 ‡∏ä‡∏°.) ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏¢‡∏≤‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                    plotResult.className = 'text-center font-semibold text-lg p-2 text-orange-600';
                    return;
                }
                
                nomogramChart.data.datasets[2].data = [{ x: time, y: level }];
                nomogramChart.update();

                const treatmentLevel = A_treat * Math.exp(-k_treat * time);
                const highRiskLevel = A_risk * Math.exp(-k_risk * time);

                if (level >= highRiskLevel) {
                    plotResult.textContent = '‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡πÄ‡∏™‡πâ‡∏ô High-Risk Line - ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏´‡πâ NAC ‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏π‡∏á';
                    plotResult.className = 'text-center font-semibold text-lg p-2 text-red-600';
                } else if (level >= treatmentLevel) {
                    plotResult.textContent = '‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡πÄ‡∏™‡πâ‡∏ô Treatment Line - ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏° NAC';
                    plotResult.className = 'text-center font-semibold text-lg p-2 text-amber-600';
                } else {
                    plotResult.textContent = '‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ‡πÄ‡∏™‡πâ‡∏ô Treatment Line - ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ NAC';
                    plotResult.className = 'text-center font-semibold text-lg p-2 text-green-600';
                }
            });

            calculateNacButton.addEventListener('click', () => {
                const weight = parseFloat(patientWeight4.value);
                if (isNaN(weight) || weight <= 0) {
                    nacResultDiv.innerHTML = `<p class="text-amber-600">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>`;
                    return;
                }

                const calculationWeight = Math.min(weight, 100);
                const weightCapped = weight > 100;

                const loadingDoseMg = 150 * calculationWeight;
                const secondDoseMg = 50 * calculationWeight;
                const thirdDoseMg = 100 * calculationWeight;

                const loadingFluid = weight < 21 ? 3 * calculationWeight : (weight < 41 ? 100 : 200);
                const secondFluid = weight < 21 ? 7 * calculationWeight : (weight < 41 ? 250 : 500);
                const thirdFluid = weight < 21 ? 14 * calculationWeight : (weight < 41 ? 500 : 1000);

                nacResultDiv.innerHTML = `
                    ${weightCapped ? `<div class="result-box p-3 rounded-md border-amber-500"><p class="text-amber-600 font-semibold">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ñ‡∏π‡∏Å‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà 100 kg</p></div>` : ''}
                    <div class="result-box p-4 rounded-md">
                        <h4 class="font-bold text-lg">Loading Dose (1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</h4>
                        <p>${loadingDoseMg.toFixed(0)} mg NAC in D5W ${loadingFluid} mL, IV drip over 60 minutes</p>
                    </div>
                    <div class="result-box p-4 rounded-md">
                        <h4 class="font-bold text-lg">Second Dose (4 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</h4>
                        <p>${secondDoseMg.toFixed(0)} mg NAC in D5W ${secondFluid} mL, IV drip over 4 hours</p>
                    </div>
                    <div class="result-box p-4 rounded-md">
                        <h4 class="font-bold text-lg">Third Dose (16 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</h4>
                        <p>${thirdDoseMg.toFixed(0)} mg NAC in D5W ${thirdFluid} mL, IV drip over 16 hours</p>
                    </div>
                `;
            });
        });
    </script>
 <div class="footer text-center text-sm text-gray-500 mt-8">
    &copy; 2025 NTWKKM &nbsp;|&nbsp; Powered by GitHub Pages
  </div>
</body>
</html>
